(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{383:function(e,t,n){"use strict";n.r(t);var a=n(39),i=n.n(a),r=n(40),l=n.n(r),o=n(41),c=n.n(o),s=n(42),u=n.n(s),d=n(26),m=n.n(d),p=n(43),f=n.n(p),h=n(17),b=n.n(h),v=n(0),E=n.n(v),g=n(384),P=n(66),O=n(33),y=n(16),C=n(382),w=n(371),k=n(372),j=n(373),S=n(374),_=n(140),D=n(188),N=n.n(D),x=Object(w.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}});function M(e){var t=x();return E.a.createElement("div",{className:t.root,id:"navbar-container"},E.a.createElement(k.a,{position:"static"},E.a.createElement(j.a,null,E.a.createElement(_.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"draft new post",size:"medium",onClick:e.handleCreatePost},E.a.createElement(N.a,null)," New Post"),E.a.createElement(_.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"view drafts",size:"medium",onClick:e.handleDraftClick},"Drafts"),E.a.createElement(S.a,{variant:"h6",className:t.title}),E.a.createElement(_.a,{color:"inherit",onClick:e.logout},"Logout"))))}var F=n(228),W=n.n(F),A=n(144),V=(n(232),n(38)),B=n(377),T=n(380),I=n(379),L=n(378),R=n(375),U=n(376),z=n(354),q=n.n(z),G=Object(w.a)({card:{maxWidth:"100%"}});var J=function(e){!function(e){window.open(e,"_blank").focus()}(e)},Y=function(e,t){return E.a.createElement(R.a,{action:E.a.createElement(U.a,{"aria-label":"edit post"},E.a.createElement(q.a,{onClick:function(){return e(t)}}))})};function H(e){var t=G();return E.a.createElement(v.Fragment,null,E.a.createElement("br",null),E.a.createElement(B.a,{className:t.card,raised:!0,id:e.content.id},e.admin&&Y(e.handleEditPost,e.content),E.a.createElement(L.a,{component:"img",alt:"desc",src:e.content.image_url_1,title:"title"}),E.a.createElement(I.a,null,E.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.content.title),E.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},e.content.content_body)),E.a.createElement(T.a,{disableSpacing:!0,style:{display:"flex","justify-content":"flex-start"}},E.a.createElement(_.a,{size:"large",color:"primary",variant:"outlined",onClick:function(){return J(e.content.referral_link)}},"SHOP NOW"))),E.a.createElement("br",null))}var K=n(381);function Q(e){return E.a.createElement(g.a,{open:e.isOpen,"aria-labelledby":"confirmation pop up"},E.a.createElement(K.a,{id:"simple-dialog-title"},"Discard?"),E.a.createElement(_.a,{label:"Yes",variant:"contained",onClick:function(){return e.cancelPost(!0)}},"YES"),E.a.createElement(_.a,{label:"No",variant:"contained",onClick:function(){return e.cancelPost(!1)}},"NO"))}var X=n(138),Z=n(142),$=n(145);function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(n,!0).forEach(function(e){b()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ne={title:"",content_body:"",rank:"",image_url_1:"",image_url_2:"",referral_link:"",confirmationOpen:!1},ae=Object(w.a)(function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}),re=function(e){function o(){var e,a;i()(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a=c()(this,(e=u()(o)).call.apply(e,[this].concat(n))),b()(m()(a),"state",ne),b()(m()(a),"classes",function(){return ae()}),b()(m()(a),"handleFormChange",function(t){return function(e){a.setState(te({},a.state,b()({},t,e.target.value)))}}),b()(m()(a),"handlePostClick",function(e){a.handlePost(a.state),a.setState(ne,a.props.handleCloseModal)}),b()(m()(a),"handlePost",function(e){var t=te({},e,{token:a.props.token});a.props.createPost(Object(V.e)(t)),a.props.handleCloseModal()}),b()(m()(a),"handleSaveClick",function(){var e=te({},a.state,{token:a.props.token});delete e.confirmationOpen,a.props.editPostContent.draft?a.props.savePost(Object(V.i)(e)):a.props.editPost(Object(V.g)(e)),a.setState(te({},a.state,{confirmationOpen:!1}),a.props.handleCloseModal)}),b()(m()(a),"handleCancelClick",function(){a.setState(te({},a.state,{confirmationOpen:!0}))}),b()(m()(a),"handleDeletePostClick",function(e,t){var n={userId:e,postId:t};a.props.deletePost(Object(V.f)(n)),a.props.handleCloseModal()}),b()(m()(a),"handleModuleExitClick",function(){a.setState(te({},a.state,{postPreviewOpen:!1}))}),b()(m()(a),"cancelPost",function(e){e?a.setState(te({},a.state,{confirmationOpen:!1}),a.props.handleCloseModal):a.setState(te({},a.state,{confirmationOpen:!1}))}),b()(m()(a),"confirmationModal",function(){return E.a.createElement(Q,{isOpen:a.state.confirmationOpen,cancelPost:a.cancelPost})}),b()(m()(a),"determineRankSelectOptions",function(e){var t=e.filter(function(e){return!e.draft}),n=W()(Array(t.length+2).keys());return n.shift(),n.map(function(e){return E.a.createElement("option",{value:e},e)})}),b()(m()(a),"showWidget",function(e){e.open()}),a}return f()(o,e),l()(o,[{key:"componentDidMount",value:function(){var e=te({},this.props.editPostContent,{draft:!0,confirmationOpen:!1,editState:!0});this.props.newPost?this.setState(ne):this.setState(e)}},{key:"render",value:function(){var r=this,e=window.cloudinary.createUploadWidget({cloudName:"dvlthlwhv",uploadPreset:"ppn7wtzd"},function(e,t){if(!e&&t&&"success"===t.event){var n="https://res.cloudinary.com/dvlthlwhv/image/upload/".concat("w_250,h_250,q_auto,f_auto,c_fill","/").concat(t.info.path),a="https://res.cloudinary.com/dvlthlwhv/image/upload/".concat("w_250,h_250,q_auto,f_auto,c_fill","/").concat(t.info.path);r.setState(te({},r.state,{image_url_1:n,image_url_2:a}))}});return E.a.createElement(v.Fragment,null,this.state.previewProps&&this.postPreview(this.state.previewProps),this.state.confirmationOpen&&this.confirmationModal(),E.a.createElement(C.a,{component:"div"},E.a.createElement(C.a,{component:"div",style:{display:"flex","justify-content":"center",width:"100%"}},E.a.createElement(A.a,{autoFocus:!0,fullWidth:!0,label:"Title",className:"textField",value:this.state.title,onChange:this.handleFormChange("title"),margin:"normal"})),E.a.createElement("br",null),E.a.createElement(C.a,{component:"div",style:{width:"100%",display:"grid",alignItems:"center",justifyItems:"center"}},E.a.createElement(_.a,{label:"upload image",variant:"contained",onClick:function(){return r.showWidget(e)}},"Upload Image"),E.a.createElement(X.a,{className:this.classes.formControl,style:{"margin-top":"3%","min-width":"5em"}},E.a.createElement($.a,{htmlFor:"age-native-simple"},"RANK"),E.a.createElement(Z.a,{native:!0,value:this.state.rank,onChange:this.handleFormChange("rank"),inputProps:{name:"rank",id:"age-native-simple"}},this.props.newPost&&E.a.createElement("option",{value:""}),this.determineRankSelectOptions(this.props.posts)))),E.a.createElement("br",null),E.a.createElement(A.a,{label:"Content Body",className:"textField",variant:"outlined",fullWidth:!0,multiline:!0,rows:10,value:this.state.content_body,onChange:this.handleFormChange("content_body"),margin:"normal"}),E.a.createElement("br",null),E.a.createElement(A.a,{label:"Referral Link",className:"textField",fullWidth:!0,value:this.state.referral_link,onChange:this.handleFormChange("referral_link"),margin:"normal"}),E.a.createElement("br",null),E.a.createElement(C.a,{component:"div",style:{display:"flex","justify-content":"space-between"}}),E.a.createElement("br",null),E.a.createElement("br",null),E.a.createElement("div",{style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(5em, 1fr))","grid-gap":"1rem"}},E.a.createElement(_.a,{variant:"contained",className:"Button",onClick:function(){return r.handlePostClick(r.state)},label:"POST"},"POST"),E.a.createElement(_.a,{label:"SAVE",variant:"contained",onClick:this.handleSaveClick},"SAVE"),E.a.createElement(_.a,{label:"DELETE",variant:"contained",onClick:function(){return r.handleDeletePostClick(r.state.user_id,r.state.id)}},"DELETE"),E.a.createElement(_.a,{label:"Save",variant:"contained",onClick:this.handleCancelClick},"CANCEL")),E.a.createElement("br",null),E.a.createElement("br",null)))}}]),o}(v.Component),oe=Object(P.c)(Object(O.b)(function(e){return{token:e.session.token,posts:e.session.userPosts}},function(t){return{savePost:function(e){return t(Object(V.h)(e,"save"))},createPost:function(e){return t(Object(V.h)(e,"create"))},editPost:function(e){return t(Object(V.h)(e,"edit"))},deletePost:function(e){return t(Object(V.h)(e,"delete"))},dispatch:function(e){return t(e)}}})(re)),ie=function(e){function o(){var e,t;i()(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=c()(this,(e=u()(o)).call.apply(e,[this].concat(a))),b()(m()(t),"renderPosts",function(e){e.sort(function(e,t){return e.rank>t.rank?1:t.rank>e.rank?-1:0});return e.map(function(e){if(e.draft===t.props.draftView)return E.a.createElement(H,{handleEditPost:t.props.handleEditPost,content:e,admin:t.props.admin})})}),t}return f()(o,e),l()(o,[{key:"render",value:function(){return this.renderPosts(this.props.posts)}}]),o}(v.Component),le=Object(P.c)(Object(O.b)(function(e){return{posts:e.session.userPosts}})(ie));function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(n,!0).forEach(function(e){b()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ue=function(e){function o(){var e,t;i()(this,o);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=c()(this,(e=u()(o)).call.apply(e,[this].concat(a))),b()(m()(t),"state",{modalOpen:!1,draftView:!1,newPost:!1,editPostContent:{}}),b()(m()(t),"createPostModal",function(){return E.a.createElement(g.a,{open:t.state.modalOpen,"aria-labelledby":"create candy review","aria-describedby":"add title, image url, review content, candy name, ect",fullWidth:!0},E.a.createElement(C.a,{component:"div"},E.a.createElement(oe,{handleCloseModal:t.handleCloseModal,editPostContent:t.state.editPostContent,newPost:t.state.newPost})))}),b()(m()(t),"handleCloseModal",function(){t.setState(se({},t.state,{modalOpen:!1}))}),b()(m()(t),"handleCreatePost",function(){t.setState(se({},t.state,{modalOpen:!0,newPost:!0}))}),b()(m()(t),"handleEditPost",function(e){t.setState(se({},t.state,{modalOpen:!0,editPostContent:e}))}),b()(m()(t),"handlePostCreated",function(){t.setState(se({},t.state,{modalOpen:!1}))}),b()(m()(t),"handleDraftClick",function(){t.setState(se({},t.state,{draftView:!t.state.draftView}))}),t}return f()(o,e),l()(o,[{key:"render",value:function(){return E.a.createElement("div",null,E.a.createElement(M,{logout:this.props.logout,handleCreatePost:this.handleCreatePost,handleDraftClick:this.handleDraftClick}),E.a.createElement(C.a,{maxWidth:"md"},E.a.createElement(le,{admin:this.props.currentUser.admin,handleEditPost:this.handleEditPost,draftView:this.state.draftView})),this.createPostModal())}}]),o}(v.Component);t.default=Object(P.c)(Object(O.b)(function(e){return{currentUser:e.session.currentUser,authenticated:e.session.authenticated,content:e.session.userPosts,loading:!1}},function(e){return{logout:function(){return e(Object(y.g)())}}})(ue))}}]);